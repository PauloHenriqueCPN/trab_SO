#!/bin/bash
menu() {
    clear
    _ano=$(date +"%Y")
    mes=$(date +"%m")

    if [[ "$mes" -le 6 ]]; then
        semestre="1"
    else
        semestre="2"
    fi

    linha=63

    format() {
        texto="$1"
        largura=$((linha - ${#texto} - 3))
        printf "%s%${largura}s#\n" "$texto" ""
    }

    echo "#####################################################################"
    echo "# $(format "IBMEC")"
    echo "# $(format "Sistemas Operacionais                Semestre $semestre de $_ano")"
    echo "# $(format "Código: IBM0940                                  Turma: 8001")"
    echo "# $(format "Professor: Luiz Fernando T. de Farias")"
    echo "# -------------------------------------------------------------------#"
    echo "# $(format "Equipe Desenvolvedora:")"
    echo "# $(format "Aluno: Paulo Henrique Costa Pereira Nunes")"
    echo "# $(format "Aluno: Vitor Faranji")"
    echo "# $(format "Aluno: José Pedro")"
    echo "# -------------------------------------------------------------------#"
    echo "# $(format "Rio de Janeiro, $(date "+%d de %B de %Y")")"
    echo "# $(format "Hora do Sistema: $(date "+%H Horas e %M Minutos")")"
    echo "#####################################################################"
    echo ""
    echo "Menu de Escolhas:"
    echo "1) Corrida de Cavalos"
    echo "2) Lanchonete"
    echo "3) Banco"
    echo "4) --Em obra--"
    echo "5) Finalizar o programa."
    echo ""
}

corrida() {
    clear
    declare -A cavalos
    cavalos[1]="            .''\n  ._.-.___.' (\`\\ \n //(    1   ( \`\'\n'/ )\\ ).__. )\n' <' \`\\ ._/\\'\n   \`   \\     \\"
    cavalos[2]="            .''\n  ._.-.___.' (\`\\ \n //(    2   ( \`\'\n'/ )\\ ).__. )\n' <' \`\\ ._/\\'\n   \`   \\     \\"
    cavalos[3]="            .''\n  ._.-.___.' (\`\\ \n //(    3   ( \`\'\n'/ )\\ ).__. )\n' <' \`\\ ._/\\'\n   \`   \\     \\"
    cavalos[4]="            .''\n  ._.-.___.' (\`\\ \n //(    4   ( \`\'\n'/ )\\ ).__. )\n' <' \`\\ ._/\\'\n   \`   \\     \\"
    cavalos[5]="            .''\n  ._.-.___.' (\`\\ \n //(    5   ( \`\'\n'/ )\\ ).__. )\n' <' \`\\ ._/\\'\n   \`   \\     \\"

    declare -A positions
    for i in {1..5}; do
	    positions[$i]=1
    done

    while true; do
	    for i in {1..5}; do
		    echo -e "${cavalos[$i]}" | while IFS= read -r line; do
		    printf "%${positions[$i]}s%s\n" "" "$line"
	            done
		    echo ""
	    done

	    read -p "Escolha o número do seu cavalo: " num_cav
	    echo ""
        
	    if [[ $num_cav =~ ^[1-5]$ ]]; then
            
		    case $num_cav in
                
			    1) echo "Você escolheu o cavalo de número 1"; sleep 2 ;;                
			    2) echo "Você escolheu o cavalo de número 2"; sleep 2 ;;               
			    3) echo "Você escolheu o cavalo de número 3"; sleep 2 ;;                
			    4) echo "Você escolheu o cavalo de número 4"; sleep 2 ;;
			    5) echo "Você escolheu o cavalo de número 5"; sleep 2 ;;
			    *) echo "Voce e cego? Nao existe este cavalo."
            
		    esac            
		    break
	    fi
    done

    clear
    echo ""
    echo "A corrida vai começar em 3..."
    sleep 1
    echo "2..."
    sleep 1
    echo "1..."
    sleep 1
    echo "Içar velas!"
    sleep 0.5
    
    track_length=50

    draw_track() {
	    clear
	    for i in {1..5}; do
		    echo "Cavalo $i:"
		    echo -e "${cavalos[$i]}" | while IFS= read -r line; do
		    printf "%${positions[$i]}s%s\n" "" "$line"
	    done
	    echo ""
    done
    }

    while true; do
	    random_cavalo=$((RANDOM % 5 + 1))

	    ((positions[$random_cavalo]+=1))
	    
	    draw_track
	    for i in {1..5}; do
		    if [ ${positions[$i]} -ge $track_length ]; then
			    echo "Cavalo $i ganhou a corrida!"
			    if [ "$num_cav" -eq "$i" ]; then
				    echo "Alguém nasceu com a bunda virada para a lua"
				    sleep 3
			    else
				    echo "Parece que nenhuma das suas bolas é de cristal"
				    sleep 3
			    fi
			    break 2			   
		    fi
	    done
	    sleep 0.2
    done
    sleep 2
    echo ""
    echo "Corrida finalizada. Voltando para o menu..."
    sleep 3
    menu
}

obra() {
parte1=(
'
                   .---.
                  / .-. \
                 / /   \ \
                / /     \ \
               / /       \ \
              / /    |    \ \
             / /     |     \ \
            / /      |      \ \
           / /       |       \ \
          / /        |        \ \
         / /         |         \ \
        / /          |          \ \
       / /           |           \ \
      / /            |            \ \
     / /             |             \ \
    / /             / \             \ \
   / /              \_/              \ \
  / (_________________________________) \
  \_____________________________________/'
'
                   .---.
                  / .-. \
                 / /   \ \
                / /     \ \
               / /       \ \
              / /    |    \ \
             / /     |     \ \
            / /      |      \ \
           / /       |       \ \		HEY!
          / /        |        \ \
         / /         |         \ \
        / /          |          \ \
       / /           |           \ \
      / /            |            \ \
     / /             |             \ \
    / /             / \             \ \
   / /              \_/              \ \
  / (_________________________________) \
  \_____________________________________/'
'
                   .---.
                  / .-. \
                 / /   \ \
                / /     \ \
               / /       \ \
              / /    |    \ \
             / /     |     \ \
            / /      |      \ \
           / /       |       \ \		VOCÊ MESMO!
          / /        |        \ \
         / /         |         \ \
        / /          |          \ \
       / /           |           \ \
      / /            |            \ \
     / /             |             \ \
    / /             / \             \ \
   / /              \_/              \ \
  / (_________________________________) \
  \_____________________________________/')
parte2=('
                 .---.
                / .-. \
               / /   \ \
              / /     \ \
             / /       \ \
            / /    |    \ \
           / /     |     \ \
          / /      |      \ \
         / /       |       \ \
        / /        |        \ \
       / /         |         \ \
      / /          |          \ \
     / /           |           \ \
    / /            |            \ \
   / /             |             \ \
  / /             / \             \ \
 / /              \_/              \ \
/ (_________________________________) \
\_____________________________________/'
'
               .---.
              / .-. \
             / /   \ \
            / /     \ \
           / /       \ \
          / /    |    \ \
         / /     |     \ \
        / /      |      \ \
       / /       |       \ \
      / /        |        \ \                                                                                    
     / /         |         \ \
    / /          |          \ \
   / /           |           \ \
  / /            |            \ \
 / /             |             \ \
/ /             / \             \ \
 /              \_/              \ \
(_________________________________) \
____________________________________/'
'
             .---.							
            / .-. \							
           / /   \ \							
          / /     \ \							
         / /       \ \							
        / /    |    \ \							
       / /     |     \ \						
      / /      |      \ \						
     / /       |       \ \						
    / /        |        \ \						
   / /         |         \ \						
  / /          |          \ \						
 / /           |           \ \					        /
/ /            |            \ \					       |
 /             |             \ \				       |
/             / \             \ \				       |
              \_/              \ \				       |_
________________________________) \					
__________________________________/'					
'
           .---.							                    
	  / .-. \							
         / /   \ \							
        / /     \ \							
       / /       \ \							
      / /    |    \ \							
     / /     |     \ \							
    / /      |      \ \							
   / /       |       \ \						
  / /        |        \ \						
 / /         |         \ \					        /	
/ /          |          \ \					       /	
 /           |           \ \					      /	
/            |            \ \					     |	
             |             \ \					     |	
            / \             \ \					     |	
            \_/              \ \				     |___
______________________________) \					
________________________________/'					
'
         .---.
        / .-. \
       / /   \ \
      / /     \ \
     / /       \ \
    / /    |    \ \
   / /     |     \ \
  / /      |      \ \
 / /       |       \ \							_
/ /        |        \ \						       /
 /         |         \ \					      / |
/          |          \ \					     /  |
           |           \ \					    /   |
           |            \ \					   |    |
           |             \ \					   |    |
          / \             \ \					   |    `
          \_/              \ \					   |_____
____________________________) \						|
______________________________/						|'
'
       .---.
      / .-. \
     / /   \ \
    / /     \ \
   / /       \ \
  / /    |    \ \
 / /     |     \ \
/ /      |      \ \
 /       |       \ \						      ___
/        |        \ \						     /
         |         \ \						    / |
         |          \ \						   /  | 
         |           \ \					  /   |
         |            \ \					 |    |
         |             \ \					 |    |__
        / \             \ \					 |    ´
        \_/              \ \					 |_______
__________________________) \					      |
____________________________/					      | '
'
     .---.
    / .-. \
   / /   \ \
  / /     \ \
 / /       \ \
/ /    |    \ \
 /     |     \ \
/      |      \ \
       |       \ \						    _____
       |        \ \						   /
       |         \ \						  / |
       |          \ \						 /  |  __
       |           \ \					        /   |  |=
       |            \ \					       |    |   \
       |             \ \				       |    |____
      / \             \ \				       |    ´
      \_/              \ \				       |_________
________________________) \					    |
__________________________/ 					    | '
'
   .---.
  / .-. \
 / /   \ \
/ /     \ \
 /       \ \
/    |    \ \
     |     \ \
     |      \ \
     |       \ \						  _______
     |        \ \						 /
     |         \ \						/ |
     |          \ \					       /  |
     |           \ \					      /   |  |===
     |            \ \					     |    |   \@/
     |             \ \					     |    |______
    / \             \ \					     |    ´
    \_/              \ \				     |___________
______________________) \					  |
________________________/					  |	'
'
 .---.								      __
/ .-. \								      \
 /   \ \							       \_
/     \ \							       ´=
       \ \								#
   |    \ \							       (#
   |     \ \								\
   |      \ \								|
   |       \ \							_______/ 
   |        \ \						       /       \
   |         \ \					      / |
   |          \ \					     /  |  _____
   |           \ \					    /   |  |===|
   |            \ \					   |    |   \@/
   |             \ \					   |    |________
  / \             \ \					   |    ´
  \_/              \ \					   |_____________
____________________) \						|
______________________/						|'
'
---.								    _____
.-. \								    \
   \ \								     \___
    \ \								     ´===
     \ \							      #--
 |    \ \							     (# @
 |     \ \							      \
 |      \ \							      |\
 |       \ \						      _______/ \\
 |        \ \						     /       \  /
 |         \ \						    / |
 |          \ \						   /  |  _____
 |           \ \					  /   |  |===| 
 |            \ \					 |    |   \@/
 |             \ \					 |    |__________
/ \             \ \					 |    ´
\_/              \ \					 |_______________
__________________) \					      |
____________________/					      |'
'
-.								  _______
. \								  \
 \ \								   \_____
  \ \								   ´=====
   \ \								    #---\
    \ \								   (# @\|
     \ \							    \   (
      \ \							    |\ ´-
       \ \						    _______/ \\__
        \ \						   /       \  /
         \ \						  / |
          \ \					  	 /  |  _____
           \ \					        /   |  |===|
            \ \					       |    |   \@/
             \ \				       |    |___________o
\             \ \				       |    ´
/              \ \				       |_________________
________________) \					    |           o
__________________/					    |'
'
								_________
\								\      __
 \								 \_____()
\ \								 ´=======
 \ \								  #---\
  \ \								 (# @\| |
   \ \								  \   (_)
    \ \								  |\ ´---
     \ \						  _______/ \\____
      \ \						 /	 \  /
       \ \						/ |           o|
        \ \					       /  |  _____     |
         \ \					      /   |  |===|    o|
          \ \					     |    |   \@/      |
           \ \					     |    |___________o|_
            \ \					     |    ´
             \ \				     |___________________
______________) \					  |           o|
________________/					  |            |'
'
							      ___________
							      \      __
 \							       \_____()__
\ \							       ´=========
 \ \								#---\  /-
  \ \							       (# @\| |/@
   \ \								\   (_)
    \ \								|\ ´---`
     \ \						_______/ \\_____/
      \ \					       /       \  /     \
       \ \					      / |           o|
        \ \					     /  |  _____     |
         \ \					    /   |  |===|    o|
          \ \					   |    |   \@/	     |
           \ \					   |    |___________o|__/
            \ \					   |    ´	       ||
             \ \				   |___________________||
______________) \				        |	    o|
________________/					| 	     |'
'
                   					    _____________
                  					    \      __
                  					     \_____()____
\							     ´===========
 \							      #---\  /---
\ \							     (# @\| |/@
 \ \							      \   (_)   /
  \ \							      |\ ´---` /|
   \ \						      _______/ \\_____//
    \ \						     /	     \  /     \
     \ \					    / |		  o|
      \ \					   /  |  _____     |
       \ \					  /   |  |===|    o|
        \ \					 |    |   \@/      |
         \ \					 |    |___________o|__/--
          \ \					 |    ´		     ||
           \ \					 |___________________||	
____________) \					      |           o|   ´´
______________/					      |            |'
'
                 					  _______________
                 					  \      __
                 					   \_____()_____/
                					   ´============`
							    #---\  /---#
\							   (# @\| |/@  #)
 \							    \   (_)   /
\ \							    |\ ´---` /|
 \ \						    _______/ \\_____// \_
  \ \						   /       \  /     \  /
   \ \						  / |           o|
    \ \						 /  |  _____     |
     \ \					/   |  |===|    o|      /
      \ \				       |    |   \@/      |     /
       \ \				       |    |___________o|__/----
        \ \				       |    ´		   ||  --
         \ \				       |___________________||  --
__________) \				       	    | 	        o|   ´´´´
____________/					    |		 |'
'
                   					________________
                    					\      __      /
                     					 \_____()_____/
                     					 ´============`
              						  #---\  /---#
              						 (# @\| |/@  #)
							  \   (_)   /
\							  |\ ´---` /|
 \						  _______/ \\_____// \___
\ \						 /	 \  /     \  /
 \ \						/ |	      o|	/
  \ \					       /  |  _____     |       /
   \ \					      /   |  |===|    o|      / /
    \ \					     |    |   \@/      |     / /
     \ \				     |    |___________o|__/----)
      \ \				     |    ´		 ||  --)
       \ \				     |___________________||  --)
________) \					  |	      o|   ´´´´   
__________/					  |	       |	  '
'
                   				      ________________
                    				      \      __      /
                      				       \_____()_____/
                       				       ´============`
                        				#---\  /---#
                        			       (# @\| |/@  #)
                        				\   (_)   /
                          				|\ ´---` /|
						_______/ \\_____// \____/
\					       /       \  /     \  /   /
 \					      / |           o|	      / o
\ \					     /  |  _____     |       / /
 \ \					    /   |  |===|    o|	    / /\
  \ \					   |    |   \@/      |     / /  \
   \ \					   |    |___________o|__/----)
    \ \					   |    ´              ||  --)
     \ \				   |___________________||  --)
______) \					|           o|   ´´´´   |
________/					|	     |          |       '
'
                       			            ________________
                     			            \      __      /     	    
                      			             \_____()_____/      	   
                      			             ´============`      	  
                       			              #---\  /---#       	 
                      			             (# @\| |/@  #)      	
                     			              \   (_)   /       /	 
                     			              |\ ´---` /|      / 	 
                  			      _______/ \\_____// \____/ o	
                 			     /       \  /     \  /   / o_
               			            / |           o|        / o_|	 
\            			           /  |  _____     |       / /   	
 \     			                  /   |  |===|    o|      / /\   	
\ \     		                 |    |   \@/      |     / /  \  	 
 \ \      			         |    |___________o|__/----)   \ 	   
  \ \           		         |    ´              ||  --)    \	   
   \ \           			 |___________________||  --)     	
____) \           			      |           o|   ´´´´   |  	 
______/                			      |            |          |
'
'
                   			          ________________
                   			          \      __      /      		   
                   			           \_____()_____/       		  
                   			           ´============`       		 
                   			            #---\  /---#        		
                    				   (# @\| |/@  #)      /		  
                   			            \   (_)   /       / 		 
                 			            |\ ´---` /|      /  		
             				    _______/ \\_____// \____/ o_		
            			           /       \  /     \  /   / o_|		
          			          / |           o|        / o_| \		
         			         /  |  _____     |       / /   \ 		
         			        /   |  |===|    o|      / /\    \		 
\        			       |    |   \@/      |     / /  \    		
 \        			       |    |___________o|__/----)   \   		 
\ \          			       |    ´              ||  --)    \  		   
 \ \         			       |___________________||  --)     \ 		   
__) \               			    |           o|   ´´´´   |   \		
____/                			    |            |          |
'
'
                   			        ________________
                   			        \      __      /         		
                   			         \_____()_____/         /		  
                 			         ´============`        / 		 
                    			          #---\  /---#        /  		
                   			         (# @\| |/@  #)      /  /	
                   			          \   (_)   /       /  / 
                 			          |\ ´---` /|      /  /  
               				  _______/ \\_____// \____/ o_|  
          			         /       \  /     \  /   / o_|    
          			        / |           o|        / o_| \  
         			       /  |  _____     |       / /   \ \ 		
        			      /   |  |===|    o|      / /\    \ \		
       				     |    |   \@/      |     / /  \    \ 		
       				     |    |___________o|__/----)   \    \		
\        			     |    ´              ||  --)    \    		 
 \        			     |___________________||  --)     \   		 
) \              			  |           o|   ´´´´   |   \__		
__/                			  |            |          |
'
'
                    			      ________________
                   			      \      __      /         __
                    			       \_____()_____/         /  )
                    			       ´============`        /  /
                    			        #---\  /---#        /  /
                    			       (# @\| |/@  #)      /  /
                    			        \   (_)   /       /  /
                    			        |\ ´---` /|      /  /
       				       	_______/ \\_____// \____/ o_|
       				       /       \  /     \  /   / o_|
       				      / |           o|        / o_| \
        			     /  |  _____     |       / /   \ \
       				    /   |  |===|    o|      / /\    \ \
          			   |    |   \@/      |     / /  \    \ \
       				   |    |___________o|__/----)   \    \/
      			   	   |    ´              ||  --)    \     |
      				   |___________________||  --)     \    /
       				        |           o|   ´´´´   |   \__/
          				|            |          |
')
parte3=(			
' 
					     ________________
                		             \      __      /         __
               			              \_____()_____/         /  )
                		              ´============`        /  /
               			               #---\  /---#        /  /
           NÃO VIU QUE ISTO É UMA 	      (# @\| |/@  #)      /  /
               ÁREA EM OBRA!?   	       \   (_)   /       /  /
                       			       |\ ´---` /|      /  /
       			               _______/ \\_____// \____/ o_|
       			              /       \  /     \  /   / o_|
        		             / |           o|        / o_| \
		                    /  |  _____     |       / /   \ \
      			           /   |  |===|    o|      / /\    \ \
           			  |    |   \@/      |     / /  \    \ \
 	                 	  |    |___________o|__/----)   \    \/
 			          |    ´              ||  --)    \     |
    			          |___________________||  --)     \    /
           			       |           o|   ´´´´   |   \__/
                                       |            |          |'
'
           			             ________________
                		             \      __      /         __
               			              \_____()_____/         /  )
                		              ´============`        /  /
               			               #---\  /---#        /  /
              SAIA DAQUI AGORA!	              (# @\| |/@  #)      /  /
                 			       \   (_)   /       /  /
                       			       |\ ´---` /|      /  /
       			               _______/ \\_____// \____/ o_|
       			              /       \  /     \  /   / o_|
        		             / |           o|        / o_| \
		                    /  |  _____     |       / /   \ \
      			           /   |  |===|    o|      / /\    \ \
           			  |    |   \@/      |     / /  \    \ \
 	                 	  |    |___________o|__/----)   \    \/
 			          |    ´              ||  --)    \     |
    			          |___________________||  --)     \    /
           			       |           o|   ´´´´   |   \__/
                                       |            |          |'


)

for animacao in "${parte1[@]}"; do
    clear
    echo "$animacao"
    sleep 1
done

for anima in "${parte2[@]}"; do
	clear
	echo "$anima"
	sleep 0.3
	  
done

for anime in "${parte3[@]}"; do
	clear
	echo "$anime"
	sleep 2.5
done
}

start() {
    while true; do
        menu
        read -p "Escolha uma opção: " escolha
        echo ""

        case $escolha in
            1) corrida ;;
            2) echo "Vai ter"; sleep 1 ;;
            3) echo "Vai ter"; sleep 1 ;;
            4) obra ;;
	    5) echo "Finalizando..."; sleep 1; break ;;
            *) echo "ALERTA! ALERTA!"; sleep 1; echo "BURRO DETECTADO"; sleep 2.5
        esac
        echo ""
    done
}

start

